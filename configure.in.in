AC_LANG_SAVE
AC_LANG_CPLUSPLUS
AC_CHECK_HEADER(FlexLexer.h,
  [kde_have_flex=yes],
  [kde_have_flex=no])

if test "$kde_have_flex" = "no"; then
  DO_NOT_COMPILE="$DO_NOT_COMPILE umbrello"
fi

dnl Not GPL compatible
AC_PATH_PROG(DOT_FOUND, dot, no)
KDE_CHECK_HEADER(graphviz/pathgeom.h,
  [kde_have_graphviz=yes],
  [kde_have_graphviz=no])
 
if test "$DOT_FOUND" != "no" -a "$kde_have_graphviz" = "yes"; then
  CXXFLAGS="$CXXFLAGS -DHAVE_DOT"
  GRAPHVIZ_LIB=`pkg-config --libs libgraph`
  AUTOLAYOUT_DIR="autolayout"
  AUTOLAYOUT_LIBS="autolayout/libautolayout.la $GRAPHVIZ_LIB -ldotgen -lgvc"
else
  AUTOLAYOUT_DIR=""
  AUTOLAYOUT_LIBS=""
fi
AC_SUBST(AUTOLAYOUT_DIR)
AC_SUBST(AUTOLAYOUT_LIBS)
dnl End of Not GPL compatible

AC_LANG_RESTORE


AC_CHECK_FUNCS(setenv)

dnl AH_BOTTOM(
dnl [#if !defined(HAVE_SETENV)
dnl #ifdef __cplusplus
dnl extern "C"
dnl #endif
dnl int setenv(const char *name, const char *value, int overwrite);
dnl #endif
dnl ])

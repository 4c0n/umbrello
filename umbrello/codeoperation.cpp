
/***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/

/*  This code generated by: 
 *      Author : thomas
 *      Date   : Fri Jun 20 2003
 */

#include <iostream.h>
#include <kdebug.h>
#include "codeoperation.h"
#include "classifiercodedocument.h"

// Constructors/Destructors
//  

CodeOperation::CodeOperation ( ClassifierCodeDocument * doc , UMLOperation * parentOp, QString body, QString comment)
    : CodeMethodBlock ( doc, body, comment)
{
	init(parentOp);
};

CodeOperation::CodeOperation ( ClassifierCodeDocument * doc, UMLOperation * parentOp )
    : CodeMethodBlock ( doc )
{
	init(parentOp);
};

CodeOperation::~CodeOperation ( ) { };

//  
// Methods
//  

// Accessor methods
//  

/**
 * Add a Parameter object to the m_parameterVector List
 */
/*
void CodeOperation::addParameter ( CodeParameter * add_object ) {
	m_parameterVector.append(add_object);
}
*/

/**
 * Remove a Parameter object from m_parameterVector List
 */
/*
void CodeOperation::removeParameter ( CodeParameter * remove_object ) {
	m_parameterVector.remove(remove_object);
}
*/

/**
 * Get the list of Parameter objects held by m_parameterVector
 * @return QPtrList<CodeParameter *> list of Parameter objects held by
 * m_parameterVector
 */
/*
QPtrList<CodeParameter> CodeOperation::getParameterList ( ) {
	return m_parameterVector;
}
*/

/**
 * Get the parent UMLOperation of this codeoperation.
 */
UMLOperation * CodeOperation::getParentOperation( ) {
	return m_parentOperation;
}

UMLObject * CodeOperation::getParentObject ( ) {
	return (UMLObject*)m_parentOperation;
}


// Other methods
//  

/** set attributes of the node that represents this class
 * in the XMI document.
 */
void CodeOperation::setAttributesOnNode ( QDomDocument & doc, QDomElement & elem) 
{

	CodeMethodBlock::setAttributesOnNode(doc,elem); // superclass

        // set local class attributes
        elem.setAttribute("parentOp",getParentOperation()->getID()); 


}

/** set the class attributes of this object from
 * the passed element node.
 */
void CodeOperation::setAttributesFromNode ( QDomElement & element) 
{

	// disconnect(m_parentOperation,SIGNAL(modified()),this,SLOT(syncToParent()));

	CodeMethodBlock::setAttributesFromNode(element); // superclass

	// local attributes
// FIX
/*
	int id = root.attribute("startMethodText","-1").toInt();
	UMLObject * obj = findObjById(id); 
	m_parentOperation = (UMLOperation*) obj;
	connect(m_parentOperation,SIGNAL(modified()),this,SLOT(syncToParent()));
*/
kdWarning()<<"UMLOperation load needs parent op, please fix"<<endl;

}


void CodeOperation::init (UMLOperation * parentOp) 
{

	m_parentOperation = parentOp;
	setTag(CodeOperation::findTag(parentOp));

	connect(m_parentOperation,SIGNAL(modified()),this,SLOT(syncToParent()));

}

